"use strict";(self.webpackChunkantd_more=self.webpackChunkantd_more||[]).push([[8255],{14133:function(t,e,n){function i(t,e){void 0===e&&(e=2);for(var n=t+"";n.length<e;)n="0"+n;return n}n.d(e,{Z:function(){return h}});var r=1e3,o=6e4,s=36e5,c=24*s;function u(t){return{days:Math.floor(t/c),hours:Math.floor(t%c/s),minutes:Math.floor(t%s/o),seconds:Math.floor(t%o/r),milliseconds:Math.floor(t%r)}}function a(t,e){var n=e.days,r=e.hours,o=e.minutes,s=e.seconds,c=e.milliseconds;return-1===t.indexOf("DD")?r+=24*n:t=t.replace("DD",i(n)),-1===t.indexOf("HH")?o+=60*r:t=t.replace("HH",i(r)),-1===t.indexOf("mm")?s+=60*o:t=t.replace("mm",i(o)),-1===t.indexOf("ss")?c+=1e3*s:t=t.replace("ss",i(s)),t.replace("SSS",i(c,3))}function l(t,e){return void 0===e&&(e="HH:mm:ss"),a(e,u(t))}var h=function(){function t(t){for(var e in this.options={time:0,interval:1e3},t)Object.prototype.hasOwnProperty.call(t,e)&&(this.options[e]=t[e]);this.options.time="number"!=typeof this.options.time||this.options.time<0?0:Math.ceil(this.options.time),this.timer=null,this.counting=!1,this.completed=!1,this.currentTime=this.options.time}return t.prototype.start=function(){this.counting||(this.counting=!0,this.tick())},t.prototype.pause=function(){clearTimeout(this.timer),this.counting=!1},t.prototype.reset=function(){this.pause(),this.completed=!1,this.currentTime=this.options.time,this.handleChange()},t.prototype.handleChange=function(){var t,e;null===(e=(t=this.options).onChange)||void 0===e||e.call(t,this.currentTime)},t.prototype.handleEnd=function(){var t,e;this.pause(),this.completed=!0,null===(e=(t=this.options).onEnd)||void 0===e||e.call(t)},t.prototype.tick=function(){var t=this,e=t.options.interval;t.completed?t.handleEnd():t.timer=setTimeout((function(){t.currentTime-=e,t.currentTime<0&&(t.currentTime=0),t.handleChange(),t.currentTime<=0?t.handleEnd():t.tick()}),e)},t.format=l,t.parseTimeData=u,t.parseFormat=a,t.padZero=i,t}()},18835:function(t,e,n){n.d(e,{Z:function(){return S}});var i=n(42210),r=n(978);var o=function(t){var e=(0,r.useRef)(t);e.current=t;var n=(0,r.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.current;return null==r?void 0:r.apply(void 0,(0,i.ev)([],(0,i.CR)(t),!1))}),[e]);return n},s=n(35561),c=n(93886),u=n(34944),a=n.n(u),l=n(97248),h={},p={getItem:function(t){return h[t]||null},setItem:function(t,e){h[t]=e},removeItem:function(t){delete h[t]}};var f=1;function d(t,e){void 0===t&&(t=""),void 0===e&&(e="cache2");var n="string"==typeof t&&t?t:"".concat(Math.random().toString(16).substring(2,8),"_").concat(f++);return"".concat(e,"_").concat(n)}var v=new(function(t){function e(e,n){var r,o,s=t.call(this)||this;return"string"==typeof e?r=e:"object"===a()(e)&&(o=e),o||"object"!==a()(n)||(o=n),s.options=(0,i.pi)({max:-1,stdTTL:0,storage:p,maxStrategy:"limited",checkperiod:0,needParsed:"boolean"==typeof(null==o?void 0:o.needParsed)?o.needParsed:!!(null==o?void 0:o.storage)},o),s.options.storage===p||function(t){try{var e="object"===a()(t)&&null!==t&&!!t.setItem&&!!t.getItem&&!!t.removeItem;if(e){var n=d();t.setItem(n,"1"),t.removeItem(n)}return e}catch(t){return console.error("[cache2] The current custom storage is not supported. The default memory cache will be used."),!1}}(s.options.storage)||(s.options.storage=p,s.options.needParsed=!1),s.cacheKey=d(r),s.startCheckperiod(),s}return(0,i.ZT)(e,t),e.prototype._check=function(t,e){var n=!0;return 0!==e.t&&e.t<Date.now()&&(n=!1,this.del(t),this.emit("expired",t,e.v)),n},e.prototype._wrap=function(t,e){var n=Date.now(),i="number"==typeof e?e:this.options.stdTTL;return{v:t,t:i>0?n+i:0,n:n}},e.prototype._isLimited=function(t){return this.options.max>-1&&t>=this.options.max},e.prototype._getReplaceKey=function(t,e){var n=t[0];return t.forEach((function(t){(e[t].t<e[n].t||e[t].t===e[n].t&&e[t].n<e[n].n)&&(n=t)})),n},e.prototype._parse=function(t){if(!this.options.needParsed)return t;try{return JSON.parse(t,this.options.reviver)}catch(e){return t}},e.prototype._stringify=function(t){return this.options.needParsed?JSON.stringify(t,this.options.replacer):t},Object.defineProperty(e.prototype,"cacheValues",{get:function(){return this._parse(this.options.storage.getItem(this.cacheKey))||{}},enumerable:!1,configurable:!0}),e.prototype.setCacheValues=function(t){this.options.storage.setItem(this.cacheKey,this._stringify(t))},e.prototype.get=function(t){var e=this.cacheValues[t];if(e&&this._check(t,e))return e.v},e.prototype.mget=function(t){var e=this,n={};if(!Array.isArray(t))return n;var i=this.cacheValues;return t.forEach((function(t){var r=i[t];r&&e._check(t,r)&&(n[t]=r.v)})),n},e.prototype.getAll=function(){var t=Object.keys(this.cacheValues);return this.mget(t)},e.prototype.set=function(t,e,n){if(0===this.options.max)return!1;var i=this.cacheValues,r=Object.keys(i);if(!i[t]&&this._isLimited(r.length)){var o=this.keys();if(this._isLimited(o.length)){if("replaced"!==this.options.maxStrategy)return!1;var s=this._getReplaceKey(o,i);this.del(s)}}return i[t]=this._wrap(e,n),this.setCacheValues(i),this.emit("set",t,i[t].v),!0},e.prototype.mset=function(t){var e=this,n=!0;return t.forEach((function(t){var i=e.set(t.key,t.value,t.ttl);n&&!i&&(n=!1)})),n},e.prototype.del=function(t){var e=this,n=this.cacheValues,i=0;return(Array.isArray(t)?t:[t]).forEach((function(t){if(n[t]){i++;var r=n[t];delete n[t],e.emit("del",t,r.v)}})),i>0&&this.setCacheValues(n),i},e.prototype.clear=function(){this.options.storage.removeItem(this.cacheKey)},e.prototype.keys=function(){var t=this,e=this.cacheValues;return Object.keys(e).filter((function(n){return t._check(n,e[n])}))},e.prototype.has=function(t){var e=this.cacheValues[t];return!(!e||!this._check(t,e))},e.prototype.take=function(t){var e,n=this.cacheValues[t];return n&&this._check(t,n)&&(e=n.v,this.del(t)),e},e.prototype.ttl=function(t,e){var n=this.cacheValues,i=n[t];return!(!i||!this._check(t,i))&&(n[t]=this._wrap(i.v,e),!0)},e.prototype.getTtl=function(t){var e=this.cacheValues,n=e[t];if(n&&this._check(t,n))return e[t].t},e.prototype.startCheckperiod=function(){var t=this;this.keys(),this.options.checkperiod>0&&(clearTimeout(this._checkTimeout),this._checkTimeout=setTimeout((function(){t.startCheckperiod()}),this.options.checkperiod))},e.prototype.stopCheckperiod=function(){clearTimeout(this._checkTimeout)},e}(l.Z))({stdTTL:3e5}),m=function(t){return v.get(t)},y=function(t,e,n){v.set(t,e,n)},g=n(56528),b=n(93011);function T(){return"undefined"==typeof document||void 0===document.visibilityState||"hidden"!==document.visibilityState}var k=[];var _=!1;if("undefined"!=typeof window&&window.addEventListener&&!_){window.addEventListener("visibilitychange",(function(){if(T())for(var t=0;t<k.length;t++){(0,k[t])()}}),!1),_=!0}var C=function(t){return k.push(t),function(){var e=k.indexOf(t);k.splice(e,1)}},w=[];var I=!1;if("undefined"!=typeof window&&window.addEventListener&&!I){var O=function(){if(T()&&("undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine))for(var t=0;t<w.length;t++){(0,w[t])()}};window.addEventListener("visibilitychange",O,!1),window.addEventListener("focus",O,!1),I=!0}var R=function(t){return w.push(t),function(){var e=w.indexOf(t);w.splice(e,1)}},E={},V=function(t,e){return e&&E[e]?E[e]:e?(E[e]=t().then((function(t){return delete E[e],t})).catch((function(t){return delete E[e],Promise.reject(t)})),E[e]):t()},P=function(){function t(t,e){this.params=[],this.pollingWhenVisibleFlag=!1,this.pollingTimer=null,this.counter=1,this.destroyed=!1,this.async=t,this.options=(0,i.pi)({cacheTime:3e5,persisted:!1,pollingWhenHidden:!0,refreshOnWindowFocus:!1,focusTimespan:5e3},e),this.unsubscribes=[],this.init()}return t.prototype.init=function(){var t,e,n,r=this.options,o=r.pollingInterval,s=r.refreshOnWindowFocus,c=r.focusTimespan;if(this.updateDebounce(),o&&this.unsubscribes.push(C(this.rePolling.bind(this))),s){var u=(t=this.refresh.bind(this),e=c,n=!1,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n||(n=!0,t.apply(void 0,(0,i.ev)([],(0,i.CR)(r),!1)),setTimeout((function(){n=!1}),e))});this.unsubscribes.push(R(u))}},t.prototype.updateDebounce=function(){var t=this.options,e=t.debounceInterval,n=t.throttleInterval;this.debounce="number"==typeof e&&e>0?(0,g.Z)(this._run,e):void 0,this.throttle="number"==typeof n&&n>0?(0,b.Z)(this._run,n):void 0},t.prototype.rePolling=function(){this.pollingWhenVisibleFlag&&(this.pollingWhenVisibleFlag=!1,this.refresh())},t.prototype.afterUpdateOptions=function(t,e){void 0===e&&(e={}),("debounceInterval"in e&&e.debounceInterval!==t.debounceInterval||"throttleInterval"in e&&e.throttleInterval!==t.throttleInterval)&&this.updateDebounce()},t.prototype.updateOptions=function(t){var e=this.options,n=(0,i.pi)((0,i.pi)({},this.options),t);this.options=n,this.afterUpdateOptions(e,n)},t.prototype._run=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.pollingTimer&&clearTimeout(this.pollingTimer);var r=this.counter;this.params=e;var o=this.options,s=o.cacheKey,c=o.cacheTime,u=o.persisted,a=o.formatResult,l=o.onSuccess,h=o.onError,p=o.onFinally,f=o.onBefore,d=o.pollingWhenHidden,v=o.pollingInterval;return null==f||f(e),new Promise((function(n,o){if(s&&u){var f=m(s);if(f&&r===t.counter)return void Promise.resolve().then((function(){null==l||l(f,e),n(f)})).finally((function(){null==p||p()}))}V((function(){return t.async.apply(t,(0,i.ev)([],(0,i.CR)(e),!1))}),s).then((function(i){if(r===t.counter){var o="function"==typeof a?a(i,e):i;s&&y(s,o,c),null==l||l(o,e),n(o)}})).catch((function(n){r===t.counter&&(null==h||h(n,e),o(n))})).finally((function(){if(r===t.counter&&(null==p||p(),v)){if(!T()&&!d)return void(t.pollingWhenVisibleFlag=!0);t.pollingTimer=setTimeout((function(){t.run.apply(t,(0,i.ev)([],(0,i.CR)(e),!1))}),v)}}))}))},t.prototype.run=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.debounce?(this.debounce.apply(this,(0,i.ev)([],(0,i.CR)(t),!1)),Promise.resolve(null)):this.throttle?(this.throttle.apply(this,(0,i.ev)([],(0,i.CR)(t),!1)),Promise.resolve(null)):(this.counter+=1,this._run.apply(this,(0,i.ev)([],(0,i.CR)(t),!1)))},t.prototype.refresh=function(){return this.run.apply(this,(0,i.ev)([],(0,i.CR)(this.params),!1))},t.prototype.cancel=function(){this.debounce&&this.debounce.cancel(),this.throttle&&this.throttle.cancel(),this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null),this.counter+=1},t.prototype.destroy=function(t){void 0===t&&(t=!0),t&&this.cancel(),this.destroyed||(this.destroyed=!0,this.unsubscribes.forEach((function(t){return t()})),this.unsubscribes=[])},t.prototype.resume=function(){this.destroyed&&(this.destroyed=!1,this.init())},t}(),F=P,L=function(){};var S=function(t,e){var n=e||{},u=n.autoRun,a=void 0===u||u,l=n.refreshDeps,h=void 0===l?[]:l,p=n.defaultParams,f=n.loadingDelay,d=n.__INTERNAL_FORMAT__,v=n.defaultLoading,y=void 0!==v&&v,g=n.initialData,b=n.cacheKey,T=void 0===b?"":b,k=n.cacheTime,_=void 0===k?3e5:k,C=n.persisted,w=void 0!==C&&C,I=n.onSuccess,O=void 0===I?L:I,R=n.onError,E=void 0===R?L:R,V=n.onFinally,P=void 0===V?L:V,S=n.onBefore,W=void 0===S?L:S,x=n.pollingInterval,D=void 0===x?0:x,A=n.pollingWhenHidden,H=void 0===A||A,K=n.refreshOnWindowFocus,Z=void 0!==K&&K,j=n.focusTimespan,M=void 0===j?5e3:j,B=n.debounceInterval,N=n.throttleInterval,J=(0,i.CR)((0,r.useState)({params:[],loading:y,error:null,data:T?m(T):g}),2),U=J[0],q=J[1],z=(0,r.useRef)(null),G=o(t),Q=o(O),X=o(E),Y=o(P),$=o(W),tt=(0,c.Z)(d),et=(0,r.useCallback)((function(t){$(t),z.current&&clearTimeout(z.current),(T?m(T):void 0)&&w||(q((function(e){return(0,i.pi)((0,i.pi)({},e),{loading:!f,params:t})})),f&&(z.current=setTimeout((function(){q((function(t){return(0,i.pi)((0,i.pi)({},t),{loading:!0})}))}),f)))}),[T,f,$,w]),nt=(0,r.useCallback)((function(t,e){z.current&&clearTimeout(z.current),q((function(e){return(0,i.pi)((0,i.pi)({},e),{data:t,error:null,loading:!1})})),Q(t,e)}),[Q]),it=(0,r.useCallback)((function(t,e){z.current&&clearTimeout(z.current),q((function(e){return(0,i.pi)((0,i.pi)({},e),{error:t,loading:!1})})),X(t,e)}),[X]),rt=(0,r.useRef)();rt.current||(rt.current=new F(G,{cacheKey:T,cacheTime:_,persisted:w,formatResult:tt.current,onSuccess:nt,onError:it,onFinally:Y,onBefore:et,debounceInterval:B,throttleInterval:N,pollingInterval:D,pollingWhenHidden:H,refreshOnWindowFocus:Z,focusTimespan:M})),(0,s.Z)((function(){rt.current.updateOptions({cacheKey:T,cacheTime:_,persisted:w,formatResult:tt.current,onSuccess:nt,onError:it,onFinally:Y,onBefore:et,debounceInterval:B,throttleInterval:N,pollingInterval:D,pollingWhenHidden:H,refreshOnWindowFocus:Z,focusTimespan:M})}),[Q,X,T,_,w,B,N,Y,$,D,H,Z,M,nt,it,et]);var ot=(0,r.useCallback)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=rt.current).run.apply(t,(0,i.ev)([],(0,i.CR)(e),!1))}),[]),st=(0,r.useCallback)((function(){return rt.current.refresh()}),[]),ct=(0,r.useCallback)((function(){rt.current.cancel(),z.current&&clearTimeout(z.current),q((function(t){return(0,i.pi)((0,i.pi)({},t),{loading:!1})}))}),[]);return(0,s.Z)((function(){a&&Array.isArray(h)&&h.length>0&&st()}),(0,i.ev)([a],(0,i.CR)(h),!1)),(0,r.useEffect)((function(){if(a){var t=Array.isArray(p)?p:void 0!==p?[p]:[];ot.apply(void 0,(0,i.ev)([],(0,i.CR)(t),!1))}return rt.current.resume(),function(){ct(),rt.current.destroy(!1)}}),[]),(0,i.pi)((0,i.pi)({},U),{run:ot,cancel:ct,mutate:function(t){q("function"==typeof t?function(e){return(0,i.pi)((0,i.pi)({},e),{data:t(U.data)})}:function(e){return(0,i.pi)((0,i.pi)({},e),{data:t})})},refresh:st})}}}]);