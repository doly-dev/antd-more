"use strict";(self.webpackChunkantd_more=self.webpackChunkantd_more||[]).push([[7857],{31273:function(e,t,n){n.r(t);var r=n(17925),i=n.n(r),o=n(978),s=n(6889),a=n(57425),c=n(50107);t.default=function(){var e=o.useState(!1),t=i()(e,2),n=t[0],r=t[1],u=o.useState(!1),l=i()(u,2),p=l[0],d=l[1];return(0,c.jsxs)("div",{children:[(0,c.jsx)(s.ZP,{onClick:function(){return r(!0)},children:"预览图片-UploadFile"}),(0,c.jsx)(s.ZP,{onClick:function(){return d(!0)},children:"预览图片-url"}),(0,c.jsx)(a.Z,{file:{uid:"-1",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png",name:"图片文件名称111"},open:n,onCancel:function(){return r(!1)}}),(0,c.jsx)(a.Z,{file:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png",open:p,onCancel:function(){return d(!1)}})]})}},51635:function(e,t,n){n.r(t);var r=n(17925),i=n.n(r),o=n(978),s=n(6889),a=n(57425),c=n(20598),u=n(4199),l=n(60249),p=n(88255),d=n(28774),f=n(63145),h=n(28538),m=n(50107),v={image:{uid:"-1",url:c,name:"test.jpg"},audio:{uid:"-2",url:u,name:"test.mp3"},video:{uid:"-3",url:l,name:"test.mp4"},pdf:{uid:"-4",url:p,name:"test.pdf"},word:{uid:"-5",url:d,name:"test.docx"},excel:{uid:"-6",url:f,name:"test.xlsx"},zip:{uid:"-7",url:h,name:"test.zip"}};t.default=function(){var e=o.useState(!1),t=i()(e,2),n=t[0],r=t[1],c=o.useState(),u=i()(c,2),l=u[0],p=u[1],d=function(e){p(v[e]),r(!0)};return(0,m.jsxs)("div",{children:[(0,m.jsx)(s.ZP,{onClick:function(){return d("image")},children:"预览图片"}),(0,m.jsx)(s.ZP,{onClick:function(){return d("audio")},children:"预览音频"}),(0,m.jsx)(s.ZP,{onClick:function(){return d("video")},children:"预览视频"}),(0,m.jsx)(s.ZP,{onClick:function(){return d("pdf")},children:"预览pdf"}),(0,m.jsx)(s.ZP,{onClick:function(){return d("word")},children:"预览word"}),(0,m.jsx)(s.ZP,{onClick:function(){return d("excel")},children:"预览excel"}),(0,m.jsx)(s.ZP,{onClick:function(){return d("zip")},children:"预览zip"}),(0,m.jsx)(a.Z,{file:l,open:n,onCancel:function(){return r(!1)}})]})}},61783:function(e,t,n){n.r(t);var r=n(35118),i=n.n(r),o=(n(978),n(57425)),s=n(20598),a=n(4199),c=n(60249),u=n(88255),l=n(28774),p=n(63145),d=n(28538),f=n(50107),h=[{uid:"-1",url:s,name:"test.jpg"},{uid:"-2",url:a,name:"test.mp3"},{uid:"-3",url:c,name:"test.mp4"},{uid:"-4",url:u,name:"test.pdf"},{uid:"-5",url:l,name:"test.docx"},{uid:"-6",url:p,name:"test.xlsx"},{uid:"-7",url:d,name:"test.zip"}].map((function(e){return i()(i()({},e),{},{thumbUrl:o.Z.getFileThumbUrl(e)})}));t.default=function(){return(0,f.jsx)(o.Z.PictureCard,{fileList:h})}},20552:function(e,t){var n=Math.random().toString(16).substring(2),r=1;t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return++r,"".concat(e).concat(n).concat(r)}},67437:function(e,t,n){n.d(t,{Z:function(){return ae}});var r=n(35118),i=n.n(r),o=n(14005),s=n.n(o),a=n(978),c=n(24174),u=n(34944),l=n.n(u),p=n(6889),d=n(38683),f=n(17662),h=n.n(f),m=n(31404),v=n.n(m),g=n(17925),x=n.n(g),y=n(89030),j=n(16359),b=n(43655),w=n.n(b),k=n(68857),P=n(46277),U=n(5242);function Z(e){if("string"!=typeof e||!e)return"";var t="/";e.indexOf("\\")>-1&&(t="\\");var n=e.split(t);return n[n.length-1]||""}var C={},L=function(e,t,n){return C[e]||(C[e]={}),C[e][t]||(C[e][t]=URL.createObjectURL(n)),C[e][t]},T=n(28467),_=n(50107),M=["imgUrl","style"],S=function(e){var t=e.imgUrl,n=void 0===t?"":t,r=e.style,o=void 0===r?{}:r,a=s()(e,M);return(0,_.jsx)(T.Z,i()(i()({footer:null,width:"auto",centered:!0,style:i()({maxWidth:"80%"},o)},a),{},{children:(0,_.jsx)("img",{alt:"",style:{width:"100%"},src:n})}))},I=a.memo(S),z=n(20552),O=["onUpload","fileTypeMessage","fileSizeMessage","maxSize","maxCount","onGetPreviewUrl","dragger","icon","title","previewModalProps","accept","className","disabled","action","beforeUpload"],V=function(e){var t=e.onUpload,n=e.fileTypeMessage,r=void 0===n?"只支持上传 %s 文件":n,o=e.fileSizeMessage,c=void 0===o?"必须小于 %s！":o,u=e.maxSize,p=void 0===u?2097152:u,d=e.maxCount,f=e.onGetPreviewUrl,m=e.dragger,g=void 0!==m&&m,b=(e.icon,e.title,e.previewModalProps),T=e.accept,M=e.className,S=e.disabled,V=e.action,R=e.beforeUpload,N=s()(e,O),E=a.useMemo((function(){return(0,z.Z)("item-upload")}),[]),A=a.useRef(!1),F=(0,P.Z)({open:!1,title:"",imgUrl:""}),G=x()(F,2),q=G[0],K=G[1],J=a.useCallback((function(e,n){var i=function(e,t){if(!t||!t.trim()||"*"===t)return!0;var n=t.toLowerCase().split(/,(?:\s+)?/),r=!1;return n.some((function(t){if(e.type===t||0===t.indexOf(".")&&e.name.toLowerCase().substring(e.name.length-t.length)===t)r=!0;else if(t.includes("/*")&&e.type.includes("/")){var n=t.match(/(.*)\/\*/),i=e.type.split("/")[0];n&&n[1]===i&&(r=!0)}return r})),r}(e,T);if(!i)return!1!==r&&y.ZP.error(r.replace(/%s/g,T)),j.Z.LIST_IGNORE;var o=function(e,t){return e.size<t}(e,p);if(!o){var s=(0,k.Z)(p);return!1!==c&&y.ZP.error(c.replace(/%s/g,s)),j.Z.LIST_IGNORE}return R?R(e,n):!!V||!!t||!(null==N||!N.customRequest)}),[T,p,R,V,t,null==N?void 0:N.customRequest,r,c]),D=a.useCallback((function(e){var n=null;!function r(){A.current?n=setTimeout(r,100):(A.current=!0,clearTimeout(n),setTimeout((function(){var n;null===(n=e.onProgress)||void 0===n||n.call(e,{percent:99}),null==t||t(e.file).then(e.onSuccess).catch(e.onError).finally((function(){A.current=!1}))})))}()}),[t]),W=a.useMemo((function(){return null==N||!N.showUploadList||"object"!==l()(N.showUploadList)||!1!==N.showUploadList.showPreviewIcon}),[null==N?void 0:N.showUploadList]),H=a.useCallback(function(){var e=v()(h()().mark((function e(t){return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W){e.next=2;break}return e.abrupt("return");case 2:if(!f||t.preview){e.next=8;break}return e.next=5,f((null==t?void 0:t.originFileObj)||t);case 5:t.preview=e.sent,e.next=9;break;case 8:t.url||(t.url=L(E,t.uid,(null==t?void 0:t.originFileObj)||t));case 9:if(t.preview||t.url||t.thumbUrl){e.next=12;break}return y.ZP.error("当前文件不支持预览！"),e.abrupt("return");case 12:K({open:!0,imgUrl:t.preview||t.url||t.thumbUrl,title:t.name||Z(t.url)});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[W,f,K,E]),B=a.useCallback((function(){K({open:!1})}),[K]),Q=a.useMemo((function(){return g?j.Z.Dragger:j.Z}),[g]);return(0,U.Z)((function(){var e,t;C[e=E]&&(t?(C[e][t]&&URL.revokeObjectURL(C[e][t]),delete C[e][t]):(Object.keys(C[e]).forEach((function(t){URL.revokeObjectURL(C[e][t])})),delete C[e]))})),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Q,i()({accept:T,beforeUpload:J,customRequest:V?void 0:D,onPreview:H,disabled:S,className:w()("antd-more-form-upload",M),action:V,maxCount:d},N)),W&&!N.onPreview&&(0,_.jsx)(I,i()(i()(i()({},q),b),{},{onCancel:B}))]})},R=["showUploadList","icon","title"],N={showPreviewIcon:!1},E=function(e){var t=e.showUploadList,n=e.icon,r=void 0===n?(0,_.jsx)(d.Z,{}):n,o=e.title,c=void 0===o?"点击上传":o,u=s()(e,R),f=a.useMemo((function(){return("boolean"!=typeof t||!1!==t)&&("object"===l()(t)?i()(i()({},N),t):N)}),[t]);return(0,_.jsx)(V,i()(i()({},u),{},{showUploadList:f,children:(0,_.jsx)(p.ZP,{icon:r,children:c})}))},A=n(3220),F=n(11288),G=function(e){var t=e.loading,n=void 0!==t&&t,r=e.uploading,i=void 0!==r&&r,o=e.icon,s=void 0===o?(0,_.jsx)(A.Z,{}):o,c=e.title,u=void 0===c?"点击上传":c,l=a.useMemo((function(){return n?"加载中":i?"上传中":u}),[n,u,i]);return(0,_.jsxs)("div",{children:[n||i?(0,_.jsx)(F.Z,{}):s,(0,_.jsx)("div",{style:{marginTop:8,lineHeight:1.5},children:l})]})},q=["fileList","maxCount","icon","title"],K=function(e){var t=e.fileList,n=e.maxCount,r=e.icon,o=e.title,a=s()(e,q);return(0,_.jsx)(V,i()(i()({fileList:t,maxCount:n,listType:"picture-card"},a),{},{accept:(null==a?void 0:a.accept)||".jpg, .jpeg, .png",children:n&&t&&t.length>=n?null:(0,_.jsx)(G,{icon:r,title:o})}))},J=n(4143),D=n.n(J),W=n(22050),H=n(50238),B=["fileList","className","icon","title"],Q="antd-more-form-upload-avatar",X=function(e){var t=e.fileList,n=e.icon,r=e.title,i=a.useState(""),o=x()(i,2),s=o[0],c=o[1],u=a.useMemo((function(){return Array.isArray(t)&&t.length>0?t[0]:null}),[t]),l="uploading"===(null==u?void 0:u.status);a.useEffect((function(){u&&(u.thumbUrl||u.url||u.preview||(u.preview=URL.createObjectURL((null==u?void 0:u.originFileObj)||u)),c(u.thumbUrl||u.url||u.preview))}),[u]);var p=null;p=u&&"error"===u.status?(0,_.jsxs)("div",{style:{width:"100%"},children:[(0,_.jsx)(H.Z,{}),(0,_.jsx)("div",{style:{marginTop:8,padding:"0 8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:u.name||"",children:u.name||""})]}):l||!s?(0,_.jsx)(G,{uploading:l,icon:n,title:r}):(0,_.jsx)("img",{src:s,alt:u&&u.name||""});var d=(0,_.jsx)("div",{className:w()("".concat(Q,"-box"),D()({},"".concat(Q,"-box-error"),u&&"error"===u.status)),children:p});return u&&"error"===u.status&&u.response?(0,_.jsx)(W.Z,{title:u.response,children:d}):d},Y=function(e){var t=e.fileList,n=e.className,r=e.icon,o=e.title,a=s()(e,B);return(0,_.jsx)(V,i()(i()({},a),{},{listType:"picture-card",accept:(null==a?void 0:a.accept)||".jpg, .jpeg, .png",fileList:t,showUploadList:!1,multiple:!1,maxCount:1,className:w()(Q,n),children:(0,_.jsx)(X,{fileList:t,icon:r,title:o})}))},$=n(69538),ee=["showUploadList","icon","title"],te={showPreviewIcon:!1},ne=function(e){var t=e.showUploadList,n=e.icon,r=void 0===n?(0,_.jsx)($.Z,{}):n,o=e.title,c=void 0===o?"单击或拖动文件到此区域进行上传":o,u=s()(e,ee),p=a.useMemo((function(){return("boolean"!=typeof t||!1!==t)&&("object"===l()(t)?i()(i()({},te),t):te)}),[t]);return(0,_.jsxs)(V,i()(i()({},u),{},{dragger:!0,showUploadList:p,children:[(0,_.jsx)("p",{className:"ant-upload-drag-icon",children:r}),(0,_.jsx)("p",{className:"ant-upload-text",children:c})]}))},re=n(79969),ie=["name","uploadProps","accept","onUpload","onGetPreviewUrl","fileTypeMessage","fileSizeMessage","maxSize","maxCount","type","disabled","multiple","icon","title","previewModalProps","required","transform"],oe=function(e){return Array.isArray(e)?e:e&&e.fileList},se=function(e){var t=e.name,n=e.uploadProps,r=e.accept,o=e.onUpload,u=e.onGetPreviewUrl,l=e.fileTypeMessage,p=e.fileSizeMessage,d=e.maxSize,f=e.maxCount,h=e.type,m=void 0===h?"default":h,v=e.disabled,g=void 0!==v&&v,x=e.multiple,y=void 0!==x&&x,j=e.icon,b=e.title,w=e.previewModalProps,k=e.required,P=e.transform,U=s()(e,ie),Z=a.useMemo((function(){return"image"===m?K:"avatar"===m?Y:"dragger"===m?ne:E}),[m]);return(0,_.jsx)(c.Z,i()(i()({required:k,valuePropName:"fileList",getValueFromEvent:oe,transform:P,name:t,rules:[{validator:function(e,t){var n="",r=t&&"function"==typeof P?P(t):t;return(!r||Array.isArray(r)&&r.length<=0)&&(n=k?"请上传".concat((0,re.Z)(U)):""),n?Promise.reject(n):Promise.resolve()}}]},U),{},{children:(0,_.jsx)(Z,i()({accept:r,onUpload:o,onGetPreviewUrl:u,fileTypeMessage:l,fileSizeMessage:p,maxSize:d,maxCount:f,disabled:g,multiple:y,icon:j,title:b,previewModalProps:w},n))}))};se.Preview=I;var ae=se},41683:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(34944),i=n.n(r),o=n(42210),s=n(97248),a={},c={getItem:function(e){return a[e]||null},setItem:function(e,t){a[e]=t},removeItem:function(e){delete a[e]}};var u=1;function l(e,t){void 0===e&&(e=""),void 0===t&&(t="cache2");var n="string"==typeof e&&e?e:"".concat(Math.random().toString(16).substring(2,8),"_").concat(u++);return"".concat(t,"_").concat(n)}var p=function(e){function t(t,n){var r,s,a=e.call(this)||this;return"string"==typeof t?r=t:"object"===i()(t)&&(s=t),s||"object"!==i()(n)||(s=n),a.options=(0,o.pi)({max:-1,stdTTL:0,storage:c,maxStrategy:"limited",checkperiod:0,needParsed:"boolean"==typeof(null==s?void 0:s.needParsed)?s.needParsed:!!(null==s?void 0:s.storage)},s),a.options.storage===c||function(e){try{var t="object"===i()(e)&&null!==e&&!!e.setItem&&!!e.getItem&&!!e.removeItem;if(t){var n=l();e.setItem(n,"1"),e.removeItem(n)}return t}catch(e){return console.error("[cache2] The current custom storage is not supported. The default memory cache will be used."),!1}}(a.options.storage)||(a.options.storage=c,a.options.needParsed=!1),a.cacheKey=l(r),a.startCheckperiod(),a}return(0,o.ZT)(t,e),t.prototype._check=function(e,t){var n=!0;return 0!==t.t&&t.t<Date.now()&&(n=!1,this.del(e),this.emit("expired",e,t.v)),n},t.prototype._wrap=function(e,t){var n=Date.now(),r="number"==typeof t?t:this.options.stdTTL;return{v:e,t:r>0?n+r:0,n:n}},t.prototype._isLimited=function(e){return this.options.max>-1&&e>=this.options.max},t.prototype._getReplaceKey=function(e,t){var n=e[0];return e.forEach((function(e){(t[e].t<t[n].t||t[e].t===t[n].t&&t[e].n<t[n].n)&&(n=e)})),n},t.prototype._parse=function(e){if(!this.options.needParsed)return e;try{return JSON.parse(e,this.options.reviver)}catch(t){return e}},t.prototype._stringify=function(e){return this.options.needParsed?JSON.stringify(e,this.options.replacer):e},Object.defineProperty(t.prototype,"cacheValues",{get:function(){return this._parse(this.options.storage.getItem(this.cacheKey))||{}},enumerable:!1,configurable:!0}),t.prototype.setCacheValues=function(e){this.options.storage.setItem(this.cacheKey,this._stringify(e))},t.prototype.get=function(e){var t=this.cacheValues[e];if(t&&this._check(e,t))return t.v},t.prototype.mget=function(e){var t=this,n={};if(!Array.isArray(e))return n;var r=this.cacheValues;return e.forEach((function(e){var i=r[e];i&&t._check(e,i)&&(n[e]=i.v)})),n},t.prototype.getAll=function(){var e=Object.keys(this.cacheValues);return this.mget(e)},t.prototype.set=function(e,t,n){if(0===this.options.max)return!1;var r=this.cacheValues,i=Object.keys(r);if(!r[e]&&this._isLimited(i.length)){var o=this.keys();if(this._isLimited(o.length)){if("replaced"!==this.options.maxStrategy)return!1;var s=this._getReplaceKey(o,r);this.del(s)}}return r[e]=this._wrap(t,n),this.setCacheValues(r),this.emit("set",e,r[e].v),!0},t.prototype.mset=function(e){var t=this,n=!0;return e.forEach((function(e){var r=t.set(e.key,e.value,e.ttl);n&&!r&&(n=!1)})),n},t.prototype.del=function(e){var t=this,n=this.cacheValues,r=0;return(Array.isArray(e)?e:[e]).forEach((function(e){if(n[e]){r++;var i=n[e];delete n[e],t.emit("del",e,i.v)}})),r>0&&this.setCacheValues(n),r},t.prototype.clear=function(){this.options.storage.removeItem(this.cacheKey)},t.prototype.keys=function(){var e=this,t=this.cacheValues;return Object.keys(t).filter((function(n){return e._check(n,t[n])}))},t.prototype.has=function(e){var t=this.cacheValues[e];return!(!t||!this._check(e,t))},t.prototype.take=function(e){var t,n=this.cacheValues[e];return n&&this._check(e,n)&&(t=n.v,this.del(e)),t},t.prototype.ttl=function(e,t){var n=this.cacheValues,r=n[e];return!(!r||!this._check(e,r))&&(n[e]=this._wrap(r.v,t),!0)},t.prototype.getTtl=function(e){var t=this.cacheValues,n=t[e];if(n&&this._check(e,n))return t[e].t},t.prototype.startCheckperiod=function(){var e=this;this.keys(),this.options.checkperiod>0&&(clearTimeout(this._checkTimeout),this._checkTimeout=setTimeout((function(){e.startCheckperiod()}),this.options.checkperiod))},t.prototype.stopCheckperiod=function(){clearTimeout(this._checkTimeout)},t}(s.Z)},63085:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(34944),i=n.n(r);function o(e){var t=i()(e);return null!=e&&("object"===t||"function"===t)}},28774:function(e,t,n){e.exports=n.p+"static/test.c3b39340.docx"},4199:function(e,t,n){e.exports=n.p+"static/test.13a07866.mp3"},60249:function(e,t,n){e.exports=n.p+"static/test.9977b04e.mp4"},88255:function(e,t,n){e.exports=n.p+"static/test.fb9403e0.pdf"},63145:function(e,t,n){e.exports=n.p+"static/test.5baa83a1.xlsx"},28538:function(e,t,n){e.exports=n.p+"static/test.feaade1b.zip"},20598:function(e,t,n){e.exports=n.p+"static/test.7e18ecd8.jpg"}}]);