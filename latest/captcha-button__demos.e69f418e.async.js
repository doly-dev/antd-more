"use strict";(self.webpackChunkantd_more=self.webpackChunkantd_more||[]).push([[5529],{90685:function(e,n,t){t.r(n);var r=t(64295),a=t.n(r),u=t(86146),i=t(87029),o=t(385);n.default=function(){var e=(0,u.useState)(!1),n=a()(e,2),t=n[0],r=n[1],s=(0,u.useCallback)((function(){r(!0)}),[]),l=(0,u.useCallback)((function(){r(!1)}),[]);return(0,o.jsx)(i.Z,{start:t,second:15,onClick:s,onEnd:l})}},54972:function(e,n,t){t.r(n);var r=t(64232),a=t.n(r),u=t(64295),i=t.n(u),o=t(81345),s=t.n(o),l=t(86146),c=t(87029),d=t(85458),f=t(385);function v(){return(v=s()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Z)();case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default=function(){var e=(0,l.useState)(!1),n=i()(e,2),t=n[0],r=n[1],a=(0,l.useState)(!1),u=i()(a,2),o=u[0],s=u[1],d=(0,l.useCallback)((function(){s(!0),function(){return v.apply(this,arguments)}().then((function(){s(!1),r(!0)}))}),[]),m=(0,l.useCallback)((function(){r(!1)}),[]);return(0,f.jsx)(c.Z,{start:t,second:10,onClick:d,initText:"点击开始倒计时",runText:"剩余%s秒",resetText:"重新开始",onEnd:m,loading:o})}},59654:function(e,n,t){t.r(n);var r=t(64232),a=t.n(r),u=t(909),i=t.n(u),o=t(64295),s=t.n(o),l=t(81345),c=t.n(l),d=t(86146),f=t(41043),v=t(93633),m=t(82702),p=t(39640),h=t(34694),x=t(53633),b=t(85458),C=t(23725),Z=t(87029),g=t(385);function j(e){return k.apply(this,arguments)}function k(){return(k=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Z)();case 2:return e.abrupt("return",{data:{requestId:"abcdefg",mobile:n}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){var n=e.mobileField,t=void 0===n?"mobile":n,r=e.form,a=e.value,u=e.onChange,o=(0,d.useRef)(null),l=(0,d.useState)(!1),c=s()(l,2),p=c[0],h=c[1],x=(0,C.Z)(j,{autoRun:!1}),b=x.run,k=x.loading,w=function(e){null==u||u(i()(i()({},a),e))},T=(0,d.useCallback)((function(){h(!1)}),[]);return(0,g.jsxs)(f.Z,{gutter:8,children:[(0,g.jsx)(v.Z,{span:16,children:(0,g.jsx)(m.Z,{placeholder:"请输入验证码",onChange:function(e){w({validateCode:e.target.value})},onBlur:function(){r.validateFields(["code","validateCode"])},value:a.validateCode,maxLength:6,allowClear:!0,ref:o})}),(0,g.jsx)(v.Z,{span:8,children:(0,g.jsx)(Z.Z,{start:p,onClick:function(){r.validateFields([t]).then((function(e){return b(e[t]).then((function(e){w({requestId:e.data.requestId}),h(!0),o.current.focus()}))}))},onEnd:T,block:!0,loading:k})})]})},T={mobile:"",code:{requestId:"",validateCode:""}},I=function(e){var n=e.mobile,t=e.code;return{mobile:n,validateCode:t.validateCode,requestId:t.requestId}},q={labelCol:{span:5},wrapperCol:{span:16}},S={wrapperCol:{sm:{offset:5},span:16}};n.default=function(){var e=p.Z.useForm(),n=s()(e,1)[0],t=(0,d.useState)((function(){return I(T)})),r=s()(t,2),a=r[0],u=r[1],o=(0,d.useCallback)((function(e){u(I(e))}),[]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(p.Z,i()(i()({},q),{},{onFinish:o,form:n,initialValues:T,name:"captcha-button-demo3",children:[(0,g.jsx)(p.Z.Item,{label:"手机号码",name:"mobile",validateFirst:!0,validateTrigger:"onBlur",required:!0,rules:[{validator:function(e,n){var t="";return n?(0,x.Z)(n)||(t="请输入正确的手机号码"):t="请输入手机号码",t?Promise.reject(t):Promise.resolve()}}],children:(0,g.jsx)(m.Z,{placeholder:"请输入手机号码",allowClear:!0,maxLength:11})}),(0,g.jsx)(p.Z.Item,{name:"code",label:"验证码",validateFirst:!0,validateTrigger:"onBlur",required:!0,rules:[{validator:function(e,n){var t="";return n.requestId?n.validateCode||(t="请输入验证码"):t="请点击获取验证码并输入",t?Promise.reject(t):Promise.resolve()}}],children:(0,g.jsx)(w,{form:n})}),(0,g.jsx)(p.Z.Item,i()(i()({},S),{},{children:(0,g.jsx)(h.ZP,{type:"primary",htmlType:"submit",children:"确定"})}))]})),(0,g.jsxs)("div",{children:["params:",JSON.stringify(a)]})]})}},87029:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(909),a=t.n(r),u=t(64295),i=t.n(u),o=t(87051),s=t.n(o),l=t(86146),c=t(34694),d=t(74811),f=t.n(d),v=t(64771),m=t(385),p=["start","initText","runText","resetText","second","onEnd","className"],h=l.forwardRef((function(e,n){var t=e.start,r=void 0!==t&&t,u=e.initText,o=void 0===u?"获取验证码":u,d=e.runText,h=void 0===d?"%s秒后重新获取":d,x=e.resetText,b=void 0===x?"重新获取验证码":x,C=e.second,Z=void 0===C?60:C,g=e.onEnd,j=e.className,k=s()(e,p),w=(0,l.useState)((function(){return r?1:0})),T=i()(w,2),I=T[0],q=T[1],S=(0,l.useState)(Z),y=i()(S,2),E=y[0],F=y[1],P=(0,l.useMemo)((function(){return new v.Z({time:1e3*Z,onChange:function(e){F(e/1e3)},onEnd:function(){q(2),null==g||g()}})}),[g,Z]);return(0,l.useEffect)((function(){if(r)return q(1),P.start(),function(){P.pause()}}),[P,r]),(0,l.useEffect)((function(){1!==I&&P.reset()}),[P,I]),(0,m.jsxs)(c.ZP,a()(a()({ref:n,className:f()("antd-more-captcha-button",j)},k),{},{disabled:1===I,children:[0===I&&o,1===I&&h.replace(/%s/g,E.toString()),2===I&&b]}))}))}}]);