"use strict";(self.webpackChunkantd_more=self.webpackChunkantd_more||[]).push([[3656],{14133:function(n,e,t){function i(n,e){void 0===e&&(e=2);for(var t=n+"";t.length<e;)t="0"+t;return t}t.d(e,{Z:function(){return h}});var o=1e3,r=6e4,u=36e5,s=24*u;function c(n){return{days:Math.floor(n/s),hours:Math.floor(n%s/u),minutes:Math.floor(n%u/r),seconds:Math.floor(n%r/o),milliseconds:Math.floor(n%o)}}function a(n,e){var t=e.days,o=e.hours,r=e.minutes,u=e.seconds,s=e.milliseconds;return-1===n.indexOf("DD")?o+=24*t:n=n.replace("DD",i(t)),-1===n.indexOf("HH")?r+=60*o:n=n.replace("HH",i(o)),-1===n.indexOf("mm")?u+=60*r:n=n.replace("mm",i(r)),-1===n.indexOf("ss")?s+=1e3*u:n=n.replace("ss",i(u)),n.replace("SSS",i(s,3))}function l(n,e){return void 0===e&&(e="HH:mm:ss"),a(e,c(n))}var h=function(){function n(n){for(var e in this.options={time:0,interval:1e3},n)Object.prototype.hasOwnProperty.call(n,e)&&(this.options[e]=n[e]);this.options.time="number"!=typeof this.options.time||this.options.time<0?0:Math.ceil(this.options.time),this.timer=null,this.counting=!1,this.completed=!1,this.currentTime=this.options.time}return n.prototype.start=function(){this.counting||(this.counting=!0,this.tick())},n.prototype.pause=function(){clearTimeout(this.timer),this.counting=!1},n.prototype.reset=function(){this.pause(),this.completed=!1,this.currentTime=this.options.time,this.handleChange()},n.prototype.handleChange=function(){var n,e;null===(e=(n=this.options).onChange)||void 0===e||e.call(n,this.currentTime)},n.prototype.handleEnd=function(){var n,e;this.pause(),this.completed=!0,null===(e=(n=this.options).onEnd)||void 0===e||e.call(n)},n.prototype.tick=function(){var n=this,e=n.options.interval;n.completed?n.handleEnd():n.timer=setTimeout((function(){n.currentTime-=e,n.currentTime<0&&(n.currentTime=0),n.handleChange(),n.currentTime<=0?n.handleEnd():n.tick()}),e)},n.format=l,n.parseTimeData=c,n.parseFormat=a,n.padZero=i,n}()},13559:function(n,e,t){t.d(e,{Z:function(){return E}});var i=t(51148),o=t(978);var r=function(n){var e=(0,o.useRef)(n);e.current=n;var t=(0,o.useCallback)((function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var o=e.current;return null==o?void 0:o.apply(void 0,(0,i.ev)([],(0,i.CR)(n),!1))}),[e]);return t},u=t(35561),s=t(93886),c=new(t(42546).Z)({stdTTL:3e5}),a=function(n){return c.get(n)},l=function(n,e,t){c.set(n,e,t)},h=t(13857);var p=t(93011);function d(){return"undefined"==typeof document||void 0===document.visibilityState||"hidden"!==document.visibilityState}var f=[];var v=!1;if("undefined"!=typeof window&&window.addEventListener&&!v){window.addEventListener("visibilitychange",(function(){if(d())for(var n=0;n<f.length;n++){(0,f[n])()}}),!1),v=!0}var m=function(n){return f.push(n),function(){var e=f.indexOf(n);f.splice(e,1)}},y=[];var g=!1;if("undefined"!=typeof window&&window.addEventListener&&!g){var b=function(){if(d()&&("undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine))for(var n=0;n<y.length;n++){(0,y[n])()}};window.addEventListener("visibilitychange",b,!1),window.addEventListener("focus",b,!1),g=!0}var T=function(n){return y.push(n),function(){var e=y.indexOf(n);y.splice(e,1)}},w={},C=function(n,e){return e&&w[e]?w[e]:e?(w[e]=n().then((function(n){return delete w[e],n})).catch((function(n){return delete w[e],Promise.reject(n)})),w[e]):n()},R=function(){function n(n,e){this.params=[],this.pollingWhenVisibleFlag=!1,this.pollingTimer=null,this.counter=1,this.destroyed=!1,this.async=n,this.options=(0,i.pi)({cacheTime:3e5,persisted:!1,pollingWhenHidden:!0,refreshOnWindowFocus:!1,focusTimespan:5e3},e),this.unsubscribes=[],this.init()}return n.prototype.init=function(){var n,e,t,o=this.options,r=o.pollingInterval,u=o.refreshOnWindowFocus,s=o.focusTimespan;if(this.updateDebounce(),r&&this.unsubscribes.push(m(this.rePolling.bind(this))),u){var c=(n=this.refresh.bind(this),e=s,t=!1,function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];t||(t=!0,n.apply(void 0,(0,i.ev)([],(0,i.CR)(o),!1)),setTimeout((function(){t=!1}),e))});this.unsubscribes.push(T(c))}},n.prototype.updateDebounce=function(){var n,e,t,i=this.options,o=i.debounceInterval,r=i.throttleInterval;this.debounce="number"==typeof o&&o>0?(n=this._run,void 0===(e=o)&&(e=0),void 0===t&&(t=!1),(0,h.Z)(n,e,t)):void 0,this.throttle="number"==typeof r&&r>0?(0,p.Z)(this._run,r):void 0},n.prototype.rePolling=function(){this.pollingWhenVisibleFlag&&(this.pollingWhenVisibleFlag=!1,this.refresh())},n.prototype.afterUpdateOptions=function(n,e){void 0===e&&(e={}),("debounceInterval"in e&&e.debounceInterval!==n.debounceInterval||"throttleInterval"in e&&e.throttleInterval!==n.throttleInterval)&&this.updateDebounce()},n.prototype.updateOptions=function(n){var e=this.options,t=(0,i.pi)((0,i.pi)({},this.options),n);this.options=t,this.afterUpdateOptions(e,t)},n.prototype._run=function(){for(var n=this,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.pollingTimer&&clearTimeout(this.pollingTimer);var o=this.counter;this.params=e;var r=this.options,u=r.cacheKey,s=r.cacheTime,c=r.persisted,h=r.formatResult,p=r.onSuccess,f=r.onError,v=r.onFinally,m=r.onBefore,y=r.pollingWhenHidden,g=r.pollingInterval;return null==m||m(e),new Promise((function(t,r){if(u&&c){var m=a(u);if(m&&o===n.counter)return void Promise.resolve().then((function(){null==p||p(m,e),t(m)})).finally((function(){null==v||v()}))}C((function(){return n.async.apply(n,(0,i.ev)([],(0,i.CR)(e),!1))}),u).then((function(i){if(o===n.counter){var r="function"==typeof h?h(i,e):i;u&&l(u,r,s),null==p||p(r,e),t(r)}})).catch((function(t){o===n.counter&&(null==f||f(t,e),r(t))})).finally((function(){if(o===n.counter&&(null==v||v(),g)){if(!d()&&!y)return void(n.pollingWhenVisibleFlag=!0);n.pollingTimer=setTimeout((function(){n.run.apply(n,(0,i.ev)([],(0,i.CR)(e),!1))}),g)}}))}))},n.prototype.run=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return this.debounce?(this.debounce.apply(this,(0,i.ev)([],(0,i.CR)(n),!1)),Promise.resolve(null)):this.throttle?(this.throttle.apply(this,(0,i.ev)([],(0,i.CR)(n),!1)),Promise.resolve(null)):(this.counter+=1,this._run.apply(this,(0,i.ev)([],(0,i.CR)(n),!1)))},n.prototype.refresh=function(){return this.run.apply(this,(0,i.ev)([],(0,i.CR)(this.params),!1))},n.prototype.cancel=function(){this.debounce&&this.debounce.cancel(),this.throttle&&this.throttle.cancel(),this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null),this.counter+=1},n.prototype.destroy=function(n){void 0===n&&(n=!0),n&&this.cancel(),this.destroyed||(this.destroyed=!0,this.unsubscribes.forEach((function(n){return n()})),this.unsubscribes=[])},n.prototype.resume=function(){this.destroyed&&(this.destroyed=!1,this.init())},n}(),I=R,O=function(){};var E=function(n,e){var t=e||{},c=t.autoRun,l=void 0===c||c,h=t.refreshDeps,p=void 0===h?[]:h,d=t.defaultParams,f=t.loadingDelay,v=t.__INTERNAL_FORMAT__,m=t.defaultLoading,y=void 0!==m&&m,g=t.initialData,b=t.cacheKey,T=void 0===b?"":b,w=t.cacheTime,C=void 0===w?3e5:w,R=t.persisted,E=void 0!==R&&R,F=t.onSuccess,k=void 0===F?O:F,W=t.onError,D=void 0===W?O:W,H=t.onFinally,_=void 0===H?O:H,L=t.onBefore,S=void 0===L?O:L,P=t.pollingInterval,Z=void 0===P?0:P,M=t.pollingWhenHidden,x=void 0===M||M,A=t.refreshOnWindowFocus,B=void 0!==A&&A,K=t.focusTimespan,V=void 0===K?5e3:K,j=t.debounceInterval,N=t.throttleInterval,U=(0,i.CR)((0,o.useState)({params:[],loading:y,error:null,data:T?a(T):g}),2),q=U[0],z=U[1],G=(0,o.useRef)(null),J=r(n),Q=r(k),X=r(D),Y=r(_),$=r(S),nn=(0,s.Z)(v),en=(0,o.useCallback)((function(n){$(n),G.current&&clearTimeout(G.current),(T?a(T):void 0)&&E||(z((function(e){return(0,i.pi)((0,i.pi)({},e),{loading:!f,params:n})})),f&&(G.current=setTimeout((function(){z((function(n){return(0,i.pi)((0,i.pi)({},n),{loading:!0})}))}),f)))}),[T,f,$,E]),tn=(0,o.useCallback)((function(n,e){G.current&&clearTimeout(G.current),z((function(e){return(0,i.pi)((0,i.pi)({},e),{data:n,error:null,loading:!1})})),Q(n,e)}),[Q]),on=(0,o.useCallback)((function(n,e){G.current&&clearTimeout(G.current),z((function(e){return(0,i.pi)((0,i.pi)({},e),{error:n,loading:!1})})),X(n,e)}),[X]),rn=(0,o.useRef)();rn.current||(rn.current=new I(J,{cacheKey:T,cacheTime:C,persisted:E,formatResult:nn.current,onSuccess:tn,onError:on,onFinally:Y,onBefore:en,debounceInterval:j,throttleInterval:N,pollingInterval:Z,pollingWhenHidden:x,refreshOnWindowFocus:B,focusTimespan:V})),(0,u.Z)((function(){rn.current.updateOptions({cacheKey:T,cacheTime:C,persisted:E,formatResult:nn.current,onSuccess:tn,onError:on,onFinally:Y,onBefore:en,debounceInterval:j,throttleInterval:N,pollingInterval:Z,pollingWhenHidden:x,refreshOnWindowFocus:B,focusTimespan:V})}),[Q,X,T,C,E,j,N,Y,$,Z,x,B,V,tn,on,en]);var un=(0,o.useCallback)((function(){for(var n,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=rn.current).run.apply(n,(0,i.ev)([],(0,i.CR)(e),!1))}),[]),sn=(0,o.useCallback)((function(){return rn.current.refresh()}),[]),cn=(0,o.useCallback)((function(){rn.current.cancel(),G.current&&clearTimeout(G.current),z((function(n){return(0,i.pi)((0,i.pi)({},n),{loading:!1})}))}),[]);return(0,u.Z)((function(){l&&Array.isArray(p)&&p.length>0&&sn()}),(0,i.ev)([l],(0,i.CR)(p),!1)),(0,o.useEffect)((function(){if(l){var n=Array.isArray(d)?d:void 0!==d?[d]:[];un.apply(void 0,(0,i.ev)([],(0,i.CR)(n),!1))}return rn.current.resume(),function(){cn(),rn.current.destroy(!1)}}),[]),(0,i.pi)((0,i.pi)({},q),{run:un,cancel:cn,mutate:function(n){z("function"==typeof n?function(e){return(0,i.pi)((0,i.pi)({},e),{data:n(q.data)})}:function(e){return(0,i.pi)((0,i.pi)({},e),{data:n})})},refresh:sn})}}}]);